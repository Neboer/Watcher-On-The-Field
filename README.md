# Watcher On The Field

minecraft 麦田里的守望者：自动小麦收割机器人 V2.0

## 功能
本程序是minecraft的一个机器人，基于[mineflayer](https://github.com/PrismarineJS/mineflayer)库开发。目前拥有如下功能：

- 收割已经成熟的小麦
- 捡起溅落的物品（所有物品）
- 将足够的小麦合成干草块
- 在空的耕地上种植小麦
- 饥饿的时候用身上的小麦合成面包并吃掉

## 配置与运行
为了让机器人正常收割种植小麦，你需要首先在世界地图中开辟一个小麦场。小麦场的规模不需要太大，大约100格小麦左右为佳，且小麦场一定为矩形（目前不支持也不太必要支持多边形矿场）。

在客户端上登录机器人账号，控制机器人移动到场地内部，然后给机器人一些（至少可以覆盖小麦场的）小麦种子（机器人在缺乏种子的状态下不会主动种植，只有在获得足够的种子之后才能启动）。

退出机器人账号，然后新建配置文件config.js，按照config_example.js的样式进行配置。注意要把矩形农场的四角坐标都正确填写。`[[a.x,a.z],[b.x,b.z]]`，a和b只是两对角点的坐标，对大小没有要求。

将本程序放在任何位置（当然，服务器为佳），`yarn`安装所有包之后然后执行主脚本src/index.js，机器人会自动登录，并完成操作。

## 注意事项
1. 机器人支持正版登录，只需要修改登录参数即可，具体参考mineflayer提供的文档，不再赘述。
2. 请使用最新的LTS版的nodejs程序运行本程序。目前至少需要比1.12更新的nodejs。nodejs的安装方法请参考其官方网站。
3. 请为机器人专门设计一个工作区域。机器人在工作的时候要尽可能不受打扰，所以建议开辟地底农场并选择一个你的领地或者远离世界出生点的地方。
4. 机器人不能够睡觉，不会吃除了自己做好的面包之外的所有东西，也不能够拿起武器像正常玩家那样和怪物战斗。
5. 机器人会主动捡起地面上的所有物品，因此尽量不要在地面上留有太多的杂物。
6. 请在足够明亮的环境中种植作物，如果环境光照不足，小麦将会不能种植。

## 稳定性
上一版本的程序并不稳定，这一版本做出了重大的更新。目前，在配置正确的情况下，机器人的工作已经相当稳定。只要不受到外界干扰，机器人可以高效流畅的完成任务，不会产生问题。

## 开发以及开发问题
程序之前依赖于模块自动寻路，现在程序已经可以抛弃这个依赖了，程序实现了一个简单的自由寻路，基于时间的到达算法可以最大限度预防死锁。

## 欢迎加入协作
如果你对mc机器人感兴趣，不妨从这个项目开始练练手，最终让这个bot变得更加完善是我们的目的。未来我打算在依赖库稳定之后，制作更多的mc机器人，给玩家带来更多的乐趣。

同时js是很适合写mc机器人的一个语言，它的事件系统十分强大，当然要感谢nodejs，同时也感谢mineflayer的全体开发团队，虽然库不能尽善尽美，但是最终呈现效果已经非常令人满意了。
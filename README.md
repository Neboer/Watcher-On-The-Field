# Watcher On The Field

minecraft 麦田里的守望者：自动小麦收割机器人 V3.0

## 功能
本程序是minecraft的一个机器人，基于[mineflayer](https://github.com/PrismarineJS/mineflayer)库开发。目前拥有如下功能：

- 收割已经成熟的小麦
- 捡起溅落的物品（所有物品）
- 将足够的小麦合成干草块
- 在空的耕地上种植小麦
- 饥饿的时候吃掉身上的面包
- 将过多的小麦种子填入堆肥桶堆肥
- 在一个小麦苗上使用骨粉
- 接收私聊消息，回应目前已经收集的小麦及种子等的数量
- 接收私聊信息，将身上的所有物品都扔给你

## 配置与运行
为了让机器人正常收割种植小麦，你需要首先在世界地图中开辟一个小麦场。小麦场的规模不需要太大，大约100格小麦左右为佳，且小麦场一定为矩形（目前不支持也不太必要支持多边形矿场）。

开辟的小麦场必须为大平地，尽量避免有各种阻碍机器人运动的物体存在，具体详见注意事项。

在客户端上登录机器人账号，控制机器人移动到场地内部，然后给机器人一些（至少可以覆盖小麦场的）小麦种子（机器人在缺乏种子的状态下不会主动种植，只有在获得足够的种子之后才能启动）。

退出机器人账号，然后新建配置文件config.js，按照config_example.js的样式进行配置。注意要把矩形农场的四角坐标和农田耕地所在的高度正确填写，工作台和堆肥桶放在耕地那一层。`[[a.x,a.z],[b.x,b.z]]`，a和b只是两对角点的坐标，对大小没有要求。

将本程序放在任何位置（当然，服务器为佳），`yarn`安装所有包之后然后执行主脚本src/index.js，机器人会自动登录，并完成操作。
## 农场
机器人在设计上具有一定的鲁棒性，但是为了保证其最佳的工作状态，机器人程序为以下的农场提供了最好的支持：
1. 农场必须为方形，所有格子的亮度必须足够种植小麦，所有格子必须有水灌溉。
2. 农场必然需要一些遮蔽措施，用来预防幻翼/怪物等生物踩踏田地/伤害机器人。
3. 农场中可以存在数个工作台和堆肥桶，它们必须都存在于机器人登录的点的附近。如果它们距离机器人登录地太远，机器人将不会使用它们。
4. 所有的水方块和堆肥桶方块都必须被活板门覆盖！机器人的寻路机制是基于时间实现的，因此如果机器人掉入低于地面的格子内将不会再爬出来。不推荐使用半砖，堆肥桶在覆盖着活板门的情况下也可正常被机器人使用。

## 注意事项
1. 机器人支持正版登录，只需要修改登录参数即可，具体参考mineflayer提供的文档，不再赘述。
2. 请使用最新的LTS版的nodejs程序运行本程序。目前至少需要比1.12更新的nodejs。nodejs的安装方法请参考其官方网站。
3. 请为机器人专门设计一个工作区域。机器人在工作的时候要尽可能不受打扰，所以建议开辟地底农场并选择一个你的领地或者远离世界出生点的地方。
4. 机器人不能够睡觉，不会吃除了自己做好的面包之外的所有东西，也不能够拿起武器像正常玩家那样和怪物战斗。
5. 机器人会主动捡起地面上的所有物品，因此尽量不要在地面上留有太多的杂物。
6. 请在足够明亮的环境中种植作物，如果环境光照不足，小麦将会不能种植。
7. 机器人目前只能支持单层小麦田，但是未来会支持多层的。机器人的默认搜索层在自己的脚下，它不会搜索其他的层。

## 稳定性
在工作环境始终保持不变的前提下，机器人已经可以保证非常稳定的工作过程了。

## 欢迎加入协作
如果你对mc机器人感兴趣，不妨从这个项目开始练练手，我们的目的是为了让这个机器人更加完善。未来我打算在依赖库稳定之后，制作更多的mc机器人，给玩家带来更多的乐趣。

同时js是很适合写mc机器人的一个语言，它的事件系统十分强大，当然要感谢nodejs，同时也感谢mineflayer的全体开发团队，虽然库不能尽善尽美，但是最终呈现效果已经非常令人满意了。
